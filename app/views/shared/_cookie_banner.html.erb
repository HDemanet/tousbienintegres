<!-- app/views/shared/_cookie_banner.html.erb -->
<div id="cookie-banner" class="cookie-banner" style="display: none; position: fixed; bottom: 0; left: 0; right: 0; background: #292929; color: white; padding: 20px; z-index: 9999;" role="dialog" aria-label="Gestion des cookies" aria-live="polite">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-8">
        <h2 class="h5 mb-2">üç™ Utilisation des cookies</h2>
        <p class="mb-0 small">
          Ce site utilise uniquement des cookies strictement n√©cessaires √† son fonctionnement (connexion, s√©curit√©).
          Aucun cookie de tracking ou publicitaire n'est utilis√©.
          <%= link_to "En savoir plus sur notre politique de confidentialit√©", privacy_path, class: "text-white text-decoration-underline", style: "color: #5F8CC7 !important;" %>
        </p>
      </div>
      <div class="col-lg-4 text-lg-end mt-3 mt-lg-0">
        <button id="accept-cookies" class="btn btn-light me-2" aria-label="Accepter les cookies">
          Accepter
        </button>
        <button id="refuse-cookies" class="btn btn-outline-light" aria-label="Refuser les cookies non-essentiels">
          Refuser
        </button>
      </div>
    </div>
  </div>
</div>

<script>
  // Gestion du consentement cookies (RGPD)
  document.addEventListener('DOMContentLoaded', function() {
    const banner = document.getElementById('cookie-banner');
    const acceptBtn = document.getElementById('accept-cookies');
    const refuseBtn = document.getElementById('refuse-cookies');

    // V√©rifier si l'utilisateur a d√©j√† fait un choix
    if (!localStorage.getItem('cookieConsent')) {
      banner.style.display = 'block';
    }

    acceptBtn.addEventListener('click', function() {
      localStorage.setItem('cookieConsent', 'accepted');
      banner.style.display = 'none';
    });

    refuseBtn.addEventListener('click', function() {
      localStorage.setItem('cookieConsent', 'refused');
      banner.style.display = 'none';
    });
  });
</script>
